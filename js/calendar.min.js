/**
 *  Document   : calendar.js
 *  Author     : josuelmm92@gmail.com
 *  Description: Script for calendar data
 *
 **/
var AppCalendar = function() {
    return {
        init: function() {
            this.initCalendar()
        },
        initCalendar: function() {
            if (jQuery().fullCalendar) {
                var e = new Date,
                    t = e.getDate(),
                    a = e.getMonth(),
                    n = e.getFullYear(),
                    r = {};

                var modal = $('.ventana-overlay, .ventana');

                $("#calendar").removeClass("mobile"), r = {
                    left: "title",
                    center: "",
                    right: "prev,next,today,month,agendaWeek,agendaDay"
                };
                var l = function(e) {
                        var t = {
                            title: $.trim(e.text())
                        };
                        e.data("eventObject", t), e.draggable({
                            zIndex: 999,
                            revert: !0,
                            revertDuration: 0
                        })
                    },
                    o = function(e) {
                        e = 0 === e.length ? "Untitled Event" : e;
                        var t = $('<div class="external-event label label-event">' + e + "</div>");
                        jQuery("#event_box").append(t), l(t)
                    };
                $("#external-events div.external-event").each(function() {
                    l($(this))
                }), $("#event_add").unbind("click").click(function() {
                    var e = $("#event_title").val();
                    o(e)
                }), $("#event_box").html(""), 
                o("Holiday"), 
                o("Wife Birthday"), 
                o("Meeting"), 
                o("Anniversary"), 
                o("Dinner"), 
                o("Party"), 
                $("#calendar").fullCalendar("destroy"), 
                $("#calendar").fullCalendar({
                    header: r,
                    defaultView: "month",
                    slotMinutes: 15,
                    editable: !0,
                    locale: "es",
                    droppable: !0,
                    drop: function(e, t) {
                        var a = $(this).data("eventObject"),
                            n = $.extend({}, a);
                        n.start = e, n.allDay = t, n.className = $(this).attr("data-class"), 
                        $("#calendar").fullCalendar("renderEvent", n, !0), 
                        $("#drop-remove").is(":checked") && $(this).remove()
                    },
                   
                    /***** LISTA DE EVENTOS ********/
                    events: {
                        url: 'DataCitas',
                        type: 'GET',
                        data: {},
                        error: function() {
                            Notificacion('error','Recargue la PÃ¡gina para Cargar los Datos de la Cita');
                        }, 
                        backgroundColor: 'transparent'
                    },
                    eventClick: function(calEvent, jsEvent, view) {
                        //alert('IdEvent: ' + calEvent.id);
                                $(".NombrePaciente").html('');
                                $(".CorreoElectronico").html('');
                                $(".DNI").html('');
                                $(".ObraSocial").html('');
                                $(".Localidad").html('');
                                $(".FechaNacimiento").html('');
                                $(".Telefono").html('');
                                $(".Edad").html('');
                                $(".Genero").html('');
                                $(".Especialista").html('');
                                $(".Servicio").html('');
                                $(".Categoria").html('');

                        modal.addClass('active');
                        var URL = "DatosCita";
                        $.ajax({
                            url: URL,
                            type: 'POST',
                            headers: {'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')},
                            data:{id:calEvent.id,_token: $('meta[name=csrf-token]').attr('content')},
                            success: function(data) {
                                $(".NombrePaciente").html(data.NombrePaciente);
                                $(".CorreoElectronico").html(data.CorreoElectronico);
                                $(".DNI").html(data.DNI);
                                $(".ObraSocial").html(data.ObraSocial);
                                $(".Localidad").html(data.Localidad);
                                $(".FechaNacimiento").html(data.FechaNacimiento);
                                $(".Telefono").html(data.Telefono);
                                $(".Edad").html(data.Edad);
                                $(".Genero").html(data.Genero);
                                $(".Especialista").html(data.Especialista);
                                $(".Servicio").html(data.Servicio);
                                $(".Categoria").html(data.Categoria);
                            }
                        });


                        $(this).css('border-color', 'red');

                    }/*,
                    events: [{
                        title: "Roberto Tellez",
                        start: '2017-10-30 07:00:00',
                        end:'2017-10-30 08:00:00',
                        backgroundColor: "#00FFFF"
                    },
                    {
                        title: "Carlos Gonsalez",
                        start: '2017-10-30 07:00:00',
                        end:'2017-10-30 07:30:00',
                        backgroundColor: "#00FFFF"
                    }
                    ,
                    {
                        title: "Carlos Gonsalez",
                        start: '2017-10-30 07:00:00',
                        end:'2017-10-30 08:00:00',
                        backgroundColor: "#00FFFF"
                    },
                    {
                        title: "Carlos Gonsalez",
                        start: '2017-10-30 07:00:00',
                        end:'2017-10-30 08:00:00',
                        backgroundColor: "#1bbc9b"
                    },
                    {
                        title: "Carlos Gonsalez",
                        start: '2017-10-30 07:00:00',
                        end:'2017-10-30 08:00:00',
                        backgroundColor: "#F3565D"
                    },]*/
                })
            }
        }
    }
}();
jQuery(document).ready(function() {
	'use strict';
    AppCalendar.init()
});